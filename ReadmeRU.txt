Калькулятор больших чисел (longcalc)

Этот калькулятор - инклюд для SA-MP сервера, написанный на языке Pawn.
Итак, в каждой ячейке переменной хранится цифра некторого числа.
Калькулятор может производить такие операции: сложение, вычитание, умножение и деление.

Настройка

#define CAL_MAX 20 - изменение этого параметра меняет максимум цифр цифр в больших числах.
Вы можете менять его от 15 до 20.

Фунции инклюда

cal_con(cal_cisin[]) - проверяет число на корректность
параметры:
cal_cisin[] (вход) - строка, содержащая число (рекомендованный размер - 32 символа)
возвращаемые значения целого типа:
0 - число корректно
1 - число некорректно

cal_cmp(cal_cisin1[], cal_cisin2[]) - сравнение двух чисел
параметры:
cal_cisin1[] (вход) - строка, содержащая первое число в проверке (рекомендованный размер - 32 символа)
cal_cisin2[] (вход) - строка, содержащая второе число в проверке (рекомендованный размер - 32 символа)
возвращаемые значения целого типа:
0 - числа равны
1 - первое число > второе число
2 - первое число < второе число

cal_pf(cal_cisin1[], cal_cisout2[]) - перевод простой строки в форматированную строку
параметры:
cal_cisin1[] (вход) - строка, содержащая простую строку (рекомендованный размер - 32 символа)
cal_cisout2[] (выход) - строка, содержащая форматированную строку (рекомендованный размер - 40 символов)
возвращаемые значения целого типа:
0 - некорректное значение входящей строки
1 - функция успешно выполнена

cal_pp(cal_cisin1[], cal_cisout2[]) - перевод форматированной строки в простую строку
параметры:
cal_cisin1[] (вход) - строка, содержащая форматированную строку (рекомендованный размер - 40 символов)
cal_cisout2[] (выход) - строка, содержащая простую строку (рекомендованный размер - 32 символа)
возвращаемые значения целого типа:
0 - некорректное значение входящей строки
1 - функция успешно выполнена

cal_add(cal_cisin1[], cal_cisin2[], cal_cisout3[], cal_cmode) - операция сложения для чисел
параметры:
cal_cisin1[] (вход) - строка, содержащая первое слагаемое (рекомендованный размер - 32 символа)
cal_cisin2[] (вход) - строка, содержащая второе слагаемое (рекомендованный размер - 32 символа)
cal_cisin3[] (выход) - строка, содержащая сумму (рекомендованный размер - 40 символов)
cal_cmode (вход) - 0 - выход простого строкового значения, 1 - выход форматированного строкового значения
возвращаемые значения целого типа:
0 - переполнение сложения
1 - функция успешно выполнена
2 - некорректное первое слагаемое
3 - некорректное второе слагаемое

cal_sub(cal_cisin1[], cal_cisin2[], cal_cisout3[], cal_cmode) - операция вычитания для чисел
параметры:
cal_cisin1[] (вход) - строка, содержащая уменьшаемое (рекомендованный размер - 32 символа)
cal_cisin2[] (вход) - строка, содержащая вычитаемое (рекомендованный размер - 32 символа)
cal_cisin3[] (выход) - строка, содержащая разницу (рекомендованный размер - 40 символов)
cal_cmode (вход) - 0 - выход простого строкового значения, 1 - выход форматированного строкового значения
возвращаемые значения целого типа:
0 - переполнение вычитания
1 - функция успешно выполнена
2 - некорректное уменьшаемое
3 - некорректное вычитаемое

cal_mul(cal_cisin1[], cal_cisin2[], cal_cisout3[], cal_cmode) - операция умножения для чисел
параметры:
cal_cisin1[] (вход) - строка, содержащая первый множитель (рекомендованный размер - 32 символа)
cal_cisin2[] (вход) - строка, содержащая второй множитель (рекомендованный размер - 32 символа)
cal_cisin3[] (выход) - строка, содержащая произведение (рекомендованный размер - 40 символов)
cal_cmode (вход) - 0 - выход простого строкового значения, 1 - выход форматированного строкового значения
возвращаемые значения целого типа:
0 - переполнение умножения
1 - функция успешно выполнена
2 - некорректный первый множитель
3 - некорректный второй множитель

cal_div(cal_cisin1[], cal_cisin2[], cal_cisout3[], cal_cmode) - операция деления для чисел
параметры:
cal_cisin1[] (вход) - строка, содержащая делимое (рекомендованный размер - 32 символа)
cal_cisin2[] (вход) - строка, содержащая делитель (рекомендованный размер - 32 символа)
cal_cisin3[] (выход) - строка, содержащая частное (рекомендованный размер - 40 символов)
cal_cmode (вход) - 0 - выход простого строкового значения, 1 - выход форматированного строкового значения
возвращаемые значения целого типа:
0 - ошибка переполнения
1 - функция успешно выполнена
2 - некорректное делимое
3 - некорректный делитель
4 - ошибка деления на нуль

Как с этим работать

Для того, чтобы сконвертировать число (переменную или константу) в большое число, вы должны использовать функцию format (или valstr).
Для примера, мы можем использовать переменную "largenumber" как большое число и переменную целого типа "number" как число для конвертирования:

format(largenumber, sizeof(largenumber), "%i", number);

или (но только при использовании чисел в диапозоне от -1'410'065'407 до 1'410'065'407):

valstr(largenumber, number);

Функции call_pp и call_pf нужны для добавления или удаления апострофов в числах.
Например, если вы напишите функцию cal_pf("1000000", largenumberapo), переменная largenumberapo будет содержать "1'000'000".

Теперь мы хотим создать пару больших чисел для их сложения и показать результат игроку:

public OnPlayerConnect(playerid)
{
    new lnumf[40];
    
    new lnum1[32];
    new lnum2[32];
    
    format(lnum1, sizeof(lnum1), "%i", 1234567891);
    format(lnum2, sizeof(lnum2), "%i", 8765432109);
    
    cal_add(lnum1, lnum2, lnumf, 1);
    
    SendClientMessage(playerid, -1, lnumf);
    
    return 1;
}

Игрок увидит сообщение "10'000'000'000".

НЕЛЬЗЯ использовать большие числа с апострофами (форматированные строки) в функциях операций!!!
